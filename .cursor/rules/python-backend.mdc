---
globs: app/api/**/*.py
---

# Python バックエンド開発ルール

## コーディング規約

- **PEP 8**に準拠したコーディングスタイル
- **4スペースインデント**を使用
- **型ヒント**を積極的に使用
- **docstring**を関数・クラスに記述

## FastAPI 設計原則

- RESTful APIの設計原則に従う
- Pydanticモデルを使用したリクエスト・レスポンスの型安全性
- 適切なHTTPステータスコードの使用
- OpenAPI仕様の自動生成を活用

## データベース設計

- SQLAlchemyを使用したORM
- マイグレーション管理（Alembic使用予定）
- 適切なインデックスの設定
- データベース接続プールの管理

## セキュリティ

- SQL インジェクション対策（パラメータ化クエリ）
- CORS設定の適切な管理
- 認証・認可の実装（Google OIDC予定）
- 機密情報の環境変数管理

## エラーハンドリング

- 適切な例外処理の実装
- ユーザーフレンドリーなエラーメッセージ
- ログ出力の適切な実装
- トランザクション管理

## パフォーマンス

- 非同期処理（async/await）の活用
- データベースクエリの最適化
- キャッシュ戦略の実装（Redis予定）
- レスポンス時間の監視

## 依存関係管理

- [requirements.txt](mdc:app/api/requirements.txt)の適切な管理
- セキュリティアップデートの定期的な実施
- バージョン固定による再現性の確保

## 例: 現在の[main.py](mdc:app/api/src/main.py)の構造を参考にする
